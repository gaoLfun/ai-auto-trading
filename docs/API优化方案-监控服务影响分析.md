# API ä¼˜åŒ–æ–¹æ¡ˆå¯¹ç›‘æ§æœåŠ¡çš„å½±å“åˆ†æ

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†åˆ†æäº†å¸å®‰ API ç¼“å­˜å’Œé™æµä¼˜åŒ–æ–¹æ¡ˆå¯¹ç³»ç»Ÿå„ä¸ªç›‘æ§æœåŠ¡çš„å½±å“ï¼Œç¡®ä¿åœ¨é™ä½ API çªå‘æµé‡ã€é¿å… IP å°ç¦çš„åŒæ—¶ï¼Œä¿è¯å„ç›‘æ§æœåŠ¡çš„æ—¶æ•ˆæ€§å’Œå‡†ç¡®æ€§ã€‚

---

## ğŸ¯ ä¼˜åŒ–æªæ–½æ€»ç»“

### 1. ç¼“å­˜å»¶é•¿ç­–ç•¥

| æ•°æ®ç±»å‹ | ä¼˜åŒ–å‰ TTL | ä¼˜åŒ–å TTL | å¢å¹… | å½±å“è¯„ä¼° |
|---------|-----------|-----------|------|---------|
| Kçº¿æ•°æ® | 5åˆ†é’Ÿ | 8åˆ†é’Ÿ | +60% | âš ï¸ è½»å¾®å»¶è¿Ÿ |
| Tickerä»·æ ¼ | 10ç§’ | 20ç§’ | +100% | âš ï¸ è½»å¾®å»¶è¿Ÿ |
| æŒä»“æ•°æ® | 5ç§’ | 8ç§’ | +60% | âš ï¸ è½»å¾®å»¶è¿Ÿ |
| è´¦æˆ·æ•°æ® | 10ç§’ | 15ç§’ | +50% | âœ… æ— å½±å“ |
| èµ„é‡‘è´¹ç‡ | 30åˆ†é’Ÿ | 30åˆ†é’Ÿ | 0% | âœ… æ— å˜åŒ– |

### 2. æ‰¹é‡è¯·æ±‚åˆ†æ•£ç­–ç•¥

- **Kçº¿æ‰¹é‡è¯·æ±‚**ï¼šé¦–æ¬¡æ— å»¶è¿Ÿï¼Œåç»­æ¯æ¬¡å»¶è¿Ÿ 200ms + 150ms/æ¬¡
- **Tickeræ‰¹é‡è¯·æ±‚**ï¼šé¦–æ¬¡æ— å»¶è¿Ÿï¼Œåç»­æ¯æ¬¡å»¶è¿Ÿ 100ms + 50ms/æ¬¡
- **å¹¶å‘æ§åˆ¶**ï¼šTickerè¯·æ±‚ç”±å¹¶å‘æ”¹ä¸ºä¸²è¡Œ
- **APIé¢‘ç‡é™åˆ¶**ï¼šç”± 5500æ¬¡/åˆ†é’Ÿ é™è‡³ 1000æ¬¡/åˆ†é’Ÿ
- **æœ€å°è¯·æ±‚é—´éš”**ï¼šç”± 100ms å¢è‡³ 200ms

---

## ğŸ” å„ç›‘æ§æœåŠ¡å½±å“åˆ†æ

### 1. äº¤æ˜“å¾ªç¯ (Trading Loop)

**æ‰§è¡Œé¢‘ç‡**: 15åˆ†é’Ÿ/æ¬¡
**æ•°æ®ä¾èµ–**: Kçº¿ã€Tickerã€æŒä»“ã€è´¦æˆ·ã€èµ„é‡‘è´¹ç‡

æ•°æ®è°ƒç”¨æ¨¡å¼

```typescript
// æ¯æ¬¡å¾ªç¯ä¸ºæ‰€æœ‰å¸ç§è°ƒç”¨ï¼ˆå¦‚8ä¸ªå¸ç§ï¼‰
for (const symbol of SYMBOLS) {
  // 1. è·å–ä»·æ ¼ï¼ˆTickerï¼‰
  const ticker = await exchangeClient.getFuturesTicker(contract);
  
  // 2. è·å–6ä¸ªæ—¶é—´æ¡†æ¶çš„Kçº¿æ•°æ®
  const candles1m = await exchangeClient.getFuturesCandles(contract, "1m", 150);
  const candles3m = await exchangeClient.getFuturesCandles(contract, "3m", 120);
  const candles5m = await exchangeClient.getFuturesCandles(contract, "5m", 100);
  const candles15m = await exchangeClient.getFuturesCandles(contract, "15m", 96);
  const candles30m = await exchangeClient.getFuturesCandles(contract, "30m", 120);
  const candles1h = await exchangeClient.getFuturesCandles(contract, "1h", 168);
  
  // 3. è·å–èµ„é‡‘è´¹ç‡
  const fr = await exchangeClient.getFundingRate(contract);
}

// 4. è·å–è´¦æˆ·ä¿¡æ¯ï¼ˆ1æ¬¡ï¼‰
const account = await exchangeClient.getFuturesAccount();

// 5. è·å–æŒä»“ä¿¡æ¯ï¼ˆ1æ¬¡ï¼‰
const positions = await exchangeClient.getPositions();
```

ä¼˜åŒ–å‰ API è°ƒç”¨é‡ï¼ˆ8ä¸ªå¸ç§ï¼‰

- Ticker: 8æ¬¡
- Kçº¿: 8 Ã— 6 = 48æ¬¡
- èµ„é‡‘è´¹ç‡: 8æ¬¡
- è´¦æˆ·: 1æ¬¡
- æŒä»“: 1æ¬¡
- **æ€»è®¡**: 66æ¬¡/15åˆ†é’Ÿ = **4.4æ¬¡/åˆ†é’Ÿ**

ä¼˜åŒ–åå½±å“è¯„ä¼°

âœ… **å½±å“æå°ï¼Œå®Œå…¨å¯æ¥å—**

**åŸå› **:

1. **15åˆ†é’Ÿå‘¨æœŸæœ¬èº«è¶³å¤Ÿé•¿**ï¼šç¼“å­˜8åˆ†é’Ÿ vs 15åˆ†é’Ÿè°ƒç”¨å‘¨æœŸï¼Œæœ€å¤šæœ‰7åˆ†é’Ÿçš„æ•°æ®å¯èƒ½æ¥è‡ªç¼“å­˜
2. **Kçº¿æ•°æ®ç‰¹æ€§**ï¼š
   - 1åˆ†é’ŸKçº¿ï¼š8åˆ†é’Ÿç¼“å­˜ = æœ€å¤š8æ ¹Kçº¿å»¶è¿Ÿï¼ˆæ€»å…±150æ ¹ï¼Œå½±å“5.3%ï¼‰
   - 5åˆ†é’ŸKçº¿ï¼š8åˆ†é’Ÿç¼“å­˜ = æœ€å¤š1-2æ ¹Kçº¿å»¶è¿Ÿï¼ˆæ€»å…±100æ ¹ï¼Œå½±å“1-2%ï¼‰
   - 15åˆ†é’ŸKçº¿ï¼š8åˆ†é’Ÿç¼“å­˜ = ä¸åˆ°1æ ¹Kçº¿çš„å»¶è¿Ÿï¼ˆæ€»å…±96æ ¹ï¼Œå½±å“<1%ï¼‰
3. **æŠ€æœ¯æŒ‡æ ‡é²æ£’æ€§**ï¼šEMAã€MACDã€RSIç­‰æŒ‡æ ‡ä½¿ç”¨å¤§é‡å†å²æ•°æ®è®¡ç®—ï¼Œå°‘é‡æœ€æ–°æ•°æ®å»¶è¿Ÿä¸ä¼šæ˜¾è‘—å½±å“ç»“æœ
4. **æ‰¹é‡å»¶è¿Ÿç¼“è§£**ï¼šè™½ç„¶æœ‰åˆ†æ•£å»¶è¿Ÿï¼Œä½†æ¯15åˆ†é’Ÿåªæ‰§è¡Œä¸€æ¬¡ï¼Œæ•´ä½“å»¶è¿Ÿï¼ˆ8ä¸ªå¸ç§Ã—6ä¸ªæ—¶é—´æ¡†æ¶Ã—150ms = çº¦7.2ç§’ï¼‰åœ¨15åˆ†é’Ÿå‘¨æœŸå†…å¯å¿½ç•¥

**æ•°æ®æ—¶æ•ˆæ€§**:

- âœ… æœ€æ–°ä»·æ ¼ï¼ˆTickerï¼‰ï¼š20ç§’ç¼“å­˜ï¼Œè¶³å¤Ÿç”¨äº15åˆ†é’Ÿå‘¨æœŸçš„è¶‹åŠ¿åˆ¤æ–­
- âœ… Kçº¿æ•°æ®ï¼š8åˆ†é’Ÿç¼“å­˜ï¼Œå¯¹ä¸­é•¿æœŸè¶‹åŠ¿åˆ†æå½±å“å¾®ä¹å…¶å¾®
- âœ… æŒä»“/è´¦æˆ·ï¼šç¼“å­˜æ—¶é—´å¾ˆçŸ­ï¼ˆ8-15ç§’ï¼‰ï¼Œ15åˆ†é’Ÿå‘¨æœŸä¸‹åŸºæœ¬æ˜¯å®æ—¶çš„

---

### 2. è´¦æˆ·èµ„äº§è®°å½•å™¨ (Account Recorder)

**æ‰§è¡Œé¢‘ç‡**: 10åˆ†é’Ÿ/æ¬¡
**æ•°æ®ä¾èµ–**: è´¦æˆ·æ•°æ®

æ•°æ®è°ƒç”¨æ¨¡å¼

```typescript
// æ¯10åˆ†é’Ÿè°ƒç”¨ä¸€æ¬¡
const account = await exchangeClient.getFuturesAccount();
```

ä¼˜åŒ–å‰ API è°ƒç”¨é‡

- è´¦æˆ·: 1æ¬¡/10åˆ†é’Ÿ = **0.1æ¬¡/åˆ†é’Ÿ**

ä¼˜åŒ–åå½±å“è¯„ä¼°

âœ… **æ— ä»»ä½•å½±å“**

**åŸå› **:

1. **è´¦æˆ·æ•°æ®ç¼“å­˜ä»…15ç§’**ï¼šè¿œå°äº10åˆ†é’Ÿçš„è°ƒç”¨å‘¨æœŸ
2. **å•æ¬¡è¯·æ±‚æ— å»¶è¿Ÿ**ï¼šæ‰¹é‡åˆ†æ•£å»¶è¿Ÿä»…é’ˆå¯¹å¾ªç¯æ‰¹é‡è¯·æ±‚ï¼Œå•æ¬¡è¯·æ±‚ä¸å—å½±å“
3. **æ•°æ®æ–°é²œåº¦å……è¶³**ï¼š10åˆ†é’Ÿå‘¨æœŸè®°å½•è´¦æˆ·èµ„äº§ï¼Œ15ç§’çš„ç¼“å­˜å®Œå…¨å¯ä»¥æ¥å—

**æ•°æ®æ—¶æ•ˆæ€§**:

- âœ… è´¦æˆ·æ€»èµ„äº§ï¼šæ¯10åˆ†é’Ÿè®°å½•ä¸€æ¬¡ï¼Œ15ç§’ç¼“å­˜ä¸å½±å“è®°å½•å‡†ç¡®æ€§
- âœ… æœªå®ç°ç›ˆäºï¼šæŒä»“æ•°æ®8ç§’ç¼“å­˜ï¼Œè¶³å¤Ÿå‡†ç¡®

---

### 3. å¥åº·æ£€æŸ¥æœåŠ¡ (Health Check)

**æ‰§è¡Œé¢‘ç‡**: 30åˆ†é’Ÿ/æ¬¡ï¼ˆæ•°æ®ä¸€è‡´æ€§æ£€æŸ¥ï¼‰
**æ•°æ®ä¾èµ–**: è´¦æˆ·ã€æŒä»“

æ•°æ®è°ƒç”¨æ¨¡å¼

```typescript
// æ¯30åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡
// 1. APIè¿æ¥æµ‹è¯•
const account = await exchangeClient.getFuturesAccount();

// 2. æ•°æ®ä¸€è‡´æ€§æ£€æŸ¥
const exchangePositions = await exchangeClient.getPositions();
```

ä¼˜åŒ–å‰ API è°ƒç”¨é‡

- è´¦æˆ·: 1æ¬¡/30åˆ†é’Ÿ = **0.033æ¬¡/åˆ†é’Ÿ**
- æŒä»“: 1æ¬¡/30åˆ†é’Ÿ = **0.033æ¬¡/åˆ†é’Ÿ**

ä¼˜åŒ–åå½±å“è¯„ä¼°

âœ… **æ— ä»»ä½•å½±å“**

**åŸå› **:

1. **30åˆ†é’Ÿå‘¨æœŸæé•¿**ï¼šè¿œè¿œå¤§äºä»»ä½•ç¼“å­˜æ—¶é—´
2. **å¥åº·æ£€æŸ¥ä¸éœ€è¦å®æ—¶æ€§**ï¼šæ—¨åœ¨å‘ç°é•¿æœŸç´¯ç§¯çš„æ•°æ®ä¸ä¸€è‡´é—®é¢˜
3. **å•æ¬¡è¯·æ±‚æ— å»¶è¿Ÿ**ï¼šå¥åº·æ£€æŸ¥æ˜¯å•æ¬¡è°ƒç”¨ï¼Œä¸æ¶‰åŠæ‰¹é‡å»¶è¿Ÿ

**æ•°æ®æ—¶æ•ˆæ€§**:

- âœ… è´¦æˆ·æ•°æ®ï¼š15ç§’ç¼“å­˜åœ¨30åˆ†é’Ÿå‘¨æœŸä¸‹å¯å¿½ç•¥ä¸è®¡
- âœ… æŒä»“æ•°æ®ï¼š8ç§’ç¼“å­˜åœ¨30åˆ†é’Ÿå‘¨æœŸä¸‹å¯å¿½ç•¥ä¸è®¡
- âœ… ä¸€è‡´æ€§æ£€æŸ¥ï¼šä¸»è¦æ£€æŸ¥æ•°æ®åº“ä¸äº¤æ˜“æ‰€çš„é•¿æœŸä¸ä¸€è‡´ï¼ŒçŸ­æœŸç¼“å­˜ä¸å½±å“æ£€æŸ¥ç»“æœ

---

### 4. åè½¬ç›‘æ§æœåŠ¡ (Reversal Monitor)

**æ‰§è¡Œé¢‘ç‡**: 3åˆ†é’Ÿ/æ¬¡
**æ•°æ®ä¾èµ–**: Kçº¿ã€Tickerã€æŒä»“

æ•°æ®è°ƒç”¨æ¨¡å¼

```typescript
// æ¯3åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ï¼Œä¸ºæ‰€æœ‰æŒä»“å¸ç§è°ƒç”¨
for (const position of positions) {
  // 1. è·å–ä»·æ ¼
  const ticker = await exchangeClient.getFuturesTicker(contract);
  
  // 2. è·å–Kçº¿ï¼ˆ3ä¸ªæ—¶é—´æ¡†æ¶ï¼‰
  const candles5m = await exchangeClient.getFuturesCandles(contract, "5m", 100);
  const candles15m = await exchangeClient.getFuturesCandles(contract, "15m", 96);
  const candles1h = await exchangeClient.getFuturesCandles(contract, "1h", 168);
}
```

ä¼˜åŒ–å‰ API è°ƒç”¨é‡ï¼ˆå‡è®¾å¹³å‡3ä¸ªæŒä»“ï¼‰

- Ticker: 3æ¬¡
- Kçº¿: 3 Ã— 3 = 9æ¬¡
- **æ€»è®¡**: 12æ¬¡/3åˆ†é’Ÿ = **4æ¬¡/åˆ†é’Ÿ**

ä¼˜åŒ–åå½±å“è¯„ä¼°

âœ… **å·²å®æ–½ä¸“é¡¹ä¼˜åŒ–ï¼Œæ—¶æ•ˆæ€§æ˜¾è‘—æå‡**

**ä¸“é¡¹ä¼˜åŒ–æªæ–½**ï¼ˆå·²éƒ¨ç½²ï¼‰:

1. **Tickerä»·æ ¼ç¼“å­˜ä¼˜åŒ–**ï¼šä»20ç§’é™è‡³**10ç§’** (-50%)
2. **Kçº¿æ•°æ®ç¼“å­˜ä¼˜åŒ–**ï¼šä»8åˆ†é’Ÿé™è‡³**5åˆ†é’Ÿ** (-37.5%)
3. **å®æ–½æ–¹å¼**ï¼šé€šè¿‡ `cacheOptions` å‚æ•°ä¸ºåè½¬ç›‘æ§é…ç½®ä¸“ç”¨çŸ­ç¼“å­˜

**ä¼˜åŒ–åæ•°æ®æ—¶æ•ˆæ€§**:

- âœ… Tickerä»·æ ¼ï¼š**10ç§’ç¼“å­˜**ï¼Œç›ˆäºè®¡ç®—å»¶è¿Ÿå‡åŠ
- âœ… Kçº¿æ•°æ®ï¼š**5åˆ†é’Ÿç¼“å­˜**ï¼Œåè½¬åˆ¤æ–­æ›´åŠæ—¶ï¼ˆä»æœ€å¤š14åˆ†é’Ÿå»¶è¿Ÿé™è‡³æœ€å¤š10åˆ†é’Ÿï¼‰
- âœ… æŒä»“æ•°æ®ï¼š8ç§’ç¼“å­˜ï¼Œä¿æŒä¸å˜

**é£é™©ç¼“è§£æªæ–½**:

- âœ… åè½¬ç›‘æ§ä½¿ç”¨å¤šæ—¶é—´æ¡†æ¶ç»¼åˆåˆ¤æ–­ï¼Œä¸ä¾èµ–å•ä¸€æ—¶é—´ç‚¹æ•°æ®
- âœ… è¯„åˆ†ç³»ç»Ÿï¼ˆ0-100åˆ†ï¼‰æä¾›ç¼“å†²ï¼Œä¸ä¼šå› çŸ­æœŸå»¶è¿Ÿè¯¯è§¦å‘
- âœ… åˆ†æ‰¹å¹³ä»“æœºåˆ¶ï¼ˆ30%/70%/100%ï¼‰è¿›ä¸€æ­¥é™ä½å»¶è¿Ÿé£é™©
- âœ… ä¸“ç”¨çŸ­ç¼“å­˜ç¡®ä¿æ•°æ®æ—¶æ•ˆæ€§

---

### 5. æ¡ä»¶å•ç›‘æ§æœåŠ¡ (Price Order Monitor)

**æ‰§è¡Œé¢‘ç‡**: 1åˆ†é’Ÿ/æ¬¡
**æ•°æ®ä¾èµ–**: æŒä»“ã€Tickerã€æ¡ä»¶å•çŠ¶æ€

æ•°æ®è°ƒç”¨æ¨¡å¼

```typescript
// æ¯1åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡
// 1. è·å–æŒä»“ï¼ˆç”¨äºéªŒè¯æ¡ä»¶å•æœ‰æ•ˆæ€§ï¼‰
const positions = await this.exchangeClient.getPositions();

// 2. æ£€æŸ¥æ¯ä¸ªæ´»è·ƒæ¡ä»¶å•
for (const order of activeOrders) {
  // è·å–æ¡ä»¶å•çŠ¶æ€ï¼ˆé€šè¿‡ Algo Order APIï¼‰
  const algoOrders = await this.exchangeClient.getPriceOrders(contract);
  
  // å¦‚æœæ¡ä»¶å•è§¦å‘ï¼Œè·å–å½“å‰ä»·æ ¼è®°å½•å¹³ä»“
  const currentTicker = await this.exchangeClient.getFuturesTicker(contract);
}
```

ä¼˜åŒ–å‰ API è°ƒç”¨é‡ï¼ˆå‡è®¾5ä¸ªæ´»è·ƒæ¡ä»¶å•ï¼‰

- æŒä»“: 1æ¬¡/åˆ†é’Ÿ
- æ¡ä»¶å•æŸ¥è¯¢: 5æ¬¡/åˆ†é’Ÿ
- Tickerï¼ˆæ¡ä»¶å•è§¦å‘æ—¶ï¼‰: ä¸ç¡®å®šï¼Œå–å†³äºè§¦å‘é¢‘ç‡
- **æ€»è®¡**: çº¦6-10æ¬¡/åˆ†é’Ÿ

ä¼˜åŒ–åå½±å“è¯„ä¼°

âœ… **å·²å®æ–½ä¸“é¡¹ä¼˜åŒ–ï¼Œè®°å½•å»¶è¿Ÿå®Œå…¨æ¶ˆé™¤**

**ä¸“é¡¹ä¼˜åŒ–æªæ–½**ï¼ˆå·²éƒ¨ç½²ï¼‰:

1. **ä»·æ ¼æ£€æµ‹ä¼˜åŒ–**ï¼šå®Œå…¨**è·³è¿‡ç¼“å­˜**ï¼Œä½¿ç”¨å®æ—¶ä»·æ ¼ (skipCache: true)
2. **å®æ–½æ–¹å¼**ï¼šæ¡ä»¶å•è§¦å‘æ£€æµ‹æ—¶ç›´æ¥æŸ¥è¯¢äº¤æ˜“æ‰€æœ€æ–°ä»·æ ¼
3. **å½±å“èŒƒå›´**ï¼šä»…åœ¨æ£€æµ‹æ¡ä»¶å•æ˜¯å¦è§¦å‘æ—¶ä½¿ç”¨ï¼Œä¸å½±å“æ•´ä½“APIæµé‡

**ä¼˜åŒ–åæ•°æ®æ—¶æ•ˆæ€§**:

- âœ… Tickerä»·æ ¼ï¼š**å®æ—¶æŸ¥è¯¢ï¼ˆ0ç§’å»¶è¿Ÿï¼‰**ï¼Œæ¡ä»¶å•è§¦å‘æ£€æµ‹æ— å»¶è¿Ÿ
- âœ… æŒä»“æ•°æ®ï¼š8ç§’ç¼“å­˜ï¼Œä¿æŒä¸å˜
- âœ… æ¡ä»¶å•çŠ¶æ€ï¼šæ— ç¼“å­˜ï¼ˆæ¯æ¬¡å®æ—¶æŸ¥è¯¢äº¤æ˜“æ‰€ï¼‰

**é£é™©è¯„ä¼°**:

- âœ… **äº¤æ˜“æ‰§è¡Œä¸å—å½±å“**ï¼šæ¡ä»¶å•ç”±äº¤æ˜“æ‰€æ‰§è¡Œï¼Œä¸ä¾èµ–ç³»ç»Ÿç›‘æ§
- âœ… **è®°å½•å»¶è¿Ÿæ¶ˆé™¤**ï¼šå®æ—¶ä»·æ ¼æŸ¥è¯¢ç¡®ä¿è§¦å‘æ£€æµ‹æ— å»¶è¿Ÿ
- âœ… **è¯¯è§¦å‘ä¿æŠ¤**ï¼šé€šè¿‡æŒä»“éªŒè¯æœºåˆ¶ï¼Œé¿å…é”™è¯¯è®°å½•

**å®æ–½ä»£ç **:

```typescript
// æ¡ä»¶å•ç›‘æ§ä½¿ç”¨å®æ—¶ä»·æ ¼ï¼ˆå·²å®æ–½ï¼‰
const currentTicker = await this.exchangeClient.getFuturesTicker(contract, 2, { skipCache: true });
```

---

## ğŸ“Š ç»¼åˆå½±å“è¯„ä¼°

### API è°ƒç”¨é¢‘ç‡å¯¹æ¯”

| æœåŠ¡ | æ‰§è¡Œé¢‘ç‡ | ä¼˜åŒ–å‰APIè°ƒç”¨/åˆ†é’Ÿ | ä¼˜åŒ–åAPIè°ƒç”¨/åˆ†é’Ÿ | ç¼“å­˜ç­–ç•¥ | ä¸“é¡¹ä¼˜åŒ– |
|-----|---------|------------------|-------------------|---------|---------|
| äº¤æ˜“å¾ªç¯ | 15åˆ†é’Ÿ | 4.4 | çº¦1.5-2.5 | é»˜è®¤ç¼“å­˜ | - |
| è´¦æˆ·è®°å½• | 10åˆ†é’Ÿ | 0.1 | 0.1 | é»˜è®¤ç¼“å­˜ | - |
| å¥åº·æ£€æŸ¥ | 30åˆ†é’Ÿ | 0.07 | 0.07 | é»˜è®¤ç¼“å­˜ | - |
| åè½¬ç›‘æ§ | 3åˆ†é’Ÿ | 4.0 | çº¦2.0-3.0 | **çŸ­ç¼“å­˜** | âœ… Ticker 10s, Kçº¿ 5min |
| æ¡ä»¶å•ç›‘æ§ | 1åˆ†é’Ÿ | 6-10 | çº¦6-10 | **å®æ—¶æŸ¥è¯¢** | âœ… skipCache |
| **æ€»è®¡** | - | **14.6-18.6** | **çº¦10-13** | æ··åˆç­–ç•¥ | **2é¡¹ä¼˜åŒ–** |

### çªå‘æµé‡é™ä½æ•ˆæœ

**ä¼˜åŒ–å‰**ï¼ˆäº¤æ˜“å¾ªç¯15åˆ†é’Ÿå‘¨æœŸï¼‰:

- æ¯15åˆ†é’Ÿé›†ä¸­å‘èµ· 66 æ¬¡è¯·æ±‚
- åœ¨2-3ç§’å†…å®Œæˆæ‰€æœ‰è¯·æ±‚
- **çªå‘æµé‡**: çº¦ **1300 è¯·æ±‚/åˆ†é’Ÿ** (66æ¬¡ Ã— 20ä¸ªæ‰¹æ¬¡)

**ä¼˜åŒ–å**:

- Kçº¿è¯·æ±‚åˆ†æ•£ï¼š200ms + 150ms/æ¬¡ = çº¦7.2ç§’å®Œæˆ48æ¬¡è¯·æ±‚
- Tickerä¸²è¡Œè¯·æ±‚ï¼š100ms + 50ms/æ¬¡ = çº¦0.8ç§’å®Œæˆ8æ¬¡è¯·æ±‚
- ç¼“å­˜å‘½ä¸­ç‡40%ï¼šå®é™…è¯·æ±‚å‡å°‘40%
- **çªå‘æµé‡**: çº¦ **240 è¯·æ±‚/åˆ†é’Ÿ** (å·²ä½äº1000/åˆ†é’Ÿé™åˆ¶)

**é™ä½å¹…åº¦**: çº¦ **81%** ğŸ‰

---

## âš ï¸ æ½œåœ¨é£é™©ä¸ç¼“è§£æªæ–½

### é£é™©1: åè½¬ç›‘æ§å»¶è¿Ÿ âœ… å·²è§£å†³

**åŸé£é™©æè¿°**: 3åˆ†é’Ÿå‘¨æœŸç›‘æ§ä½¿ç”¨8åˆ†é’Ÿç¼“å­˜Kçº¿ï¼Œå¯èƒ½å»¶è¿Ÿæ£€æµ‹åè½¬

**è§£å†³æ–¹æ¡ˆï¼ˆå·²å®æ–½ï¼‰**:

1. âœ… **ä¸“ç”¨çŸ­ç¼“å­˜å·²éƒ¨ç½²**ï¼šTicker 10ç§’ã€Kçº¿ 5åˆ†é’Ÿ
2. âœ… åè½¬ç›‘æ§ä½¿ç”¨å¤šæ—¶é—´æ¡†æ¶ï¼ˆ5åˆ†é’Ÿã€15åˆ†é’Ÿã€1å°æ—¶ï¼‰ï¼Œä¸ä¾èµ–å•ä¸€æ—¶é—´ç‚¹
3. âœ… è¯„åˆ†ç³»ç»Ÿï¼ˆ0-100åˆ†ï¼‰æä¾›ç¼“å†²ï¼Œä¸ä¼šå› çŸ­æœŸå»¶è¿Ÿè¯¯è§¦å‘
4. âœ… åˆ†æ‰¹å¹³ä»“ï¼ˆ30%/70%/100%ï¼‰è¿›ä¸€æ­¥é™ä½é£é™©

**ä¼˜åŒ–æ•ˆæœ**: æ•°æ®å»¶è¿Ÿä»æœ€å¤š14åˆ†é’Ÿé™è‡³æœ€å¤š10åˆ†é’Ÿï¼Œæ—¶æ•ˆæ€§æå‡çº¦29%

### é£é™©2: æ¡ä»¶å•è§¦å‘è®°å½•å»¶è¿Ÿ âœ… å·²è§£å†³

**åŸé£é™©æè¿°**: Ticker 20ç§’ç¼“å­˜å¯èƒ½å¯¼è‡´æ¡ä»¶å•è§¦å‘è®°å½•å»¶è¿Ÿ

**è§£å†³æ–¹æ¡ˆï¼ˆå·²å®æ–½ï¼‰**:

1. âœ… **å®æ—¶æŸ¥è¯¢å·²éƒ¨ç½²**ï¼šæ¡ä»¶å•è§¦å‘æ£€æµ‹å®Œå…¨è·³è¿‡ç¼“å­˜ï¼ˆskipCache: trueï¼‰
2. âœ… æ¡ä»¶å•ç”±äº¤æ˜“æ‰€æ‰§è¡Œï¼Œä¸ä¾èµ–ç³»ç»Ÿç›‘æ§ï¼Œäº¤æ˜“æœ¬èº«ä¸å—å½±å“
3. âœ… æŒä»“éªŒè¯æœºåˆ¶é¿å…é”™è¯¯è®°å½•

**ä¼˜åŒ–æ•ˆæœ**: è§¦å‘æ£€æµ‹å»¶è¿Ÿä»æœ€å¤š20ç§’é™è‡³0ç§’ï¼Œè®°å½•å»¶è¿Ÿå®Œå…¨æ¶ˆé™¤

### é£é™©3: å¸‚åœºæç«¯æ³¢åŠ¨

**é£é™©æè¿°**: åœ¨å¸‚åœºæç«¯æ³¢åŠ¨æ—¶ï¼Œç¼“å­˜æ•°æ®å¯èƒ½å¯¼è‡´å†³ç­–æ»å

**ç¼“è§£æªæ–½**:

1. âœ… 15åˆ†é’Ÿäº¤æ˜“å‘¨æœŸæœ¬èº«å¯¹æçŸ­æœŸæ³¢åŠ¨ä¸æ•æ„Ÿ
2. âœ… æ­¢æŸå•ç”±äº¤æ˜“æ‰€æ‰§è¡Œï¼Œä¸å—ç³»ç»Ÿç¼“å­˜å½±å“
3. ğŸ”§ ç´§æ€¥æƒ…å†µä¸‹å¯ä¸´æ—¶ç¦ç”¨ç¼“å­˜ï¼ˆè®¾ç½®ç¯å¢ƒå˜é‡ `DISABLE_CACHE=true`ï¼‰

---

## âœ… ä¼˜åŒ–æ•ˆæœéªŒè¯

### éªŒè¯æŒ‡æ ‡

1. **APIè°ƒç”¨é¢‘ç‡**
   - ç›®æ ‡ï¼š< 1000 è¯·æ±‚/åˆ†é’Ÿï¼ˆå¸å®‰é™åˆ¶5000/åˆ†é’Ÿï¼Œç•™50%ç¼“å†²ï¼‰
   - ç›‘æ§æ–¹å¼ï¼šBinanceExchangeClient å†…ç½®é€Ÿç‡ç»Ÿè®¡æ—¥å¿—

2. **IPå°ç¦æƒ…å†µ**
   - ç›®æ ‡ï¼šæ—  IP å°ç¦ï¼ˆ418/429 é”™è¯¯ï¼‰
   - ç›‘æ§æ–¹å¼ï¼špm2-error.log æ—¥å¿—ç›‘æ§

3. **æ•°æ®æ—¶æ•ˆæ€§**
   - ç›®æ ‡ï¼šäº¤æ˜“å†³ç­–å»¶è¿Ÿ < 30ç§’
   - ç›‘æ§æ–¹å¼ï¼šäº¤æ˜“å¾ªç¯æ—¥å¿—ä¸­çš„æ—¶é—´æˆ³

4. **åè½¬ç›‘æ§å‡†ç¡®æ€§**
   - ç›®æ ‡ï¼šæ— è¯¯è§¦å‘å¹³ä»“ï¼ˆå› æ•°æ®å»¶è¿Ÿå¯¼è‡´ï¼‰
   - ç›‘æ§æ–¹å¼ï¼šåè½¬ç›‘æ§æ—¥å¿—ä¸­çš„è¯„åˆ†å˜åŒ–

### è§‚å¯Ÿå‘¨æœŸ

- **çŸ­æœŸè§‚å¯Ÿ**ï¼ˆ24å°æ—¶ï¼‰ï¼šéªŒè¯ API è°ƒç”¨é¢‘ç‡ä¸‹é™å’Œ IP å°ç¦æ¶ˆé™¤
- **ä¸­æœŸè§‚å¯Ÿ**ï¼ˆ7å¤©ï¼‰ï¼šéªŒè¯æ•°æ®æ—¶æ•ˆæ€§å¯¹äº¤æ˜“å†³ç­–çš„å½±å“
- **é•¿æœŸè§‚å¯Ÿ**ï¼ˆ30å¤©ï¼‰ï¼šéªŒè¯æ•´ä½“ç³»ç»Ÿç¨³å®šæ€§å’Œç›ˆäºè¡¨ç°

---

## ğŸ”§ åŠ¨æ€è°ƒæ•´ç­–ç•¥

### å¦‚æœ API é¢‘ç‡ä»ç„¶è¿‡é«˜

1. è¿›ä¸€æ­¥å»¶é•¿ç¼“å­˜æ—¶é—´ï¼š
   - Kçº¿ï¼š8åˆ†é’Ÿ â†’ 10åˆ†é’Ÿ
   - Tickerï¼š20ç§’ â†’ 30ç§’
2. å¢åŠ æ‰¹é‡è¯·æ±‚å»¶è¿Ÿï¼š
   - Kçº¿ï¼š150ms â†’ 200ms
   - Tickerï¼š50ms â†’ 100ms

### å¦‚æœç›‘æ§æœåŠ¡æ—¶æ•ˆæ€§ä¸è¶³

1. ä¸ºç‰¹å®šæœåŠ¡é…ç½®çŸ­ç¼“å­˜ï¼š

   ```typescript
   // åè½¬ç›‘æ§ä¸“ç”¨çŸ­ç¼“å­˜
   const ticker = await exchangeClient.getFuturesTicker(contract, { ttl: 10000 });
   ```

2. ä¼˜å…ˆçº§è°ƒåº¦ï¼šé«˜ä¼˜å…ˆçº§æœåŠ¡è·³è¿‡ç¼“å­˜
3. å®æ—¶æ•°æ®é€šé“ï¼šä½¿ç”¨ WebSocket æ¨é€å…³é”®æ•°æ®ï¼ˆTickerä»·æ ¼ï¼‰

### å¦‚æœå‡ºç°è¯¯è§¦å‘å¹³ä»“

1. æ£€æŸ¥åè½¬ç›‘æ§è¯„åˆ†é€»è¾‘
2. è°ƒæ•´ç¼“å­˜ç­–ç•¥ï¼ˆç¼©çŸ­åè½¬ç›‘æ§çš„Kçº¿ç¼“å­˜ï¼‰
3. å¢åŠ åè½¬è¯„åˆ†é˜ˆå€¼ï¼ˆ30åˆ†â†’40åˆ†ï¼Œ70åˆ†â†’80åˆ†ï¼‰

---

## ğŸ“ ç»“è®º

### ä¼˜åŒ–æ–¹æ¡ˆè¯„ä¼°

âœ… **æ€»ä½“è¯„ä¼°ï¼šä¼˜ç§€**

1. **APIæµé‡é™ä½æ•ˆæœæ˜¾è‘—**ï¼šçªå‘æµé‡é™ä½çº¦81%ï¼Œä»1300/åˆ†é’Ÿé™è‡³240/åˆ†é’Ÿ
2. **ç›‘æ§æœåŠ¡æ—¶æ•ˆæ€§å½±å“å¯æ§ï¼ˆå…³é”®æœåŠ¡å·²ä¸“é¡¹ä¼˜åŒ–ï¼‰**ï¼š
   - äº¤æ˜“å¾ªç¯ï¼ˆ15åˆ†é’Ÿï¼‰ï¼šâœ… æ— å½±å“
   - è´¦æˆ·è®°å½•ï¼ˆ10åˆ†é’Ÿï¼‰ï¼šâœ… æ— å½±å“
   - å¥åº·æ£€æŸ¥ï¼ˆ30åˆ†é’Ÿï¼‰ï¼šâœ… æ— å½±å“
   - åè½¬ç›‘æ§ï¼ˆ3åˆ†é’Ÿï¼‰ï¼šâœ… **å·²ä¼˜åŒ–** - ä¸“ç”¨çŸ­ç¼“å­˜ï¼ˆTicker 10s, Kçº¿ 5minï¼‰
   - æ¡ä»¶å•ç›‘æ§ï¼ˆ1åˆ†é’Ÿï¼‰ï¼šâœ… **å·²ä¼˜åŒ–** - å®æ—¶æŸ¥è¯¢ï¼ˆskipCacheï¼‰
3. **é£é™©ç¼“è§£æªæ–½å……åˆ†**ï¼šå¤šæ—¶é—´æ¡†æ¶åˆ†æã€è¯„åˆ†ç³»ç»Ÿã€åˆ†æ‰¹å¹³ä»“ã€æŒä»“éªŒè¯ç­‰
4. **åŠ¨æ€è°ƒæ•´ç©ºé—´å……è¶³**ï¼šå¯æ ¹æ®å®é™…è¿è¡Œæƒ…å†µçµæ´»è°ƒæ•´ç¼“å­˜å’Œå»¶è¿Ÿå‚æ•°

### å»ºè®®è¡ŒåŠ¨

1. âœ… **ç«‹å³éƒ¨ç½²**ï¼šå½“å‰ä¼˜åŒ–æ–¹æ¡ˆå·²ç»è¿‡å……åˆ†åˆ†æï¼Œå¯ä»¥éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
2. ğŸ” **æŒç»­ç›‘æ§**ï¼šè§‚å¯Ÿ24-48å°æ—¶ï¼Œç¡®è®¤IPå°ç¦é—®é¢˜æ¶ˆé™¤
3. ğŸ“Š **æ•°æ®æ”¶é›†**ï¼šæ”¶é›†å„ç›‘æ§æœåŠ¡çš„å®é™…å»¶è¿Ÿå’Œå‡†ç¡®æ€§æ•°æ®
4. ğŸ”§ **æŒ‰éœ€å¾®è°ƒ**ï¼šæ ¹æ®å®é™…è¿è¡Œæ•°æ®ï¼Œå¾®è°ƒç¼“å­˜TTLå’Œå»¶è¿Ÿå‚æ•°

### é•¿æœŸä¼˜åŒ–æ–¹å‘

1. **WebSocket æ¨é€**ï¼šå®ç° Ticker å’ŒæŒä»“çš„å®æ—¶æ¨é€ï¼Œå‡å°‘è½®è¯¢
2. **æ™ºèƒ½ç¼“å­˜**ï¼šæ ¹æ®å¸‚åœºæ³¢åŠ¨åº¦åŠ¨æ€è°ƒæ•´ç¼“å­˜TTLï¼ˆæ³¢åŠ¨å¤§â†’çŸ­TTLï¼Œæ³¢åŠ¨å°â†’é•¿TTLï¼‰
3. **åˆ†çº§ API é™æµ**ï¼šä¸ºä¸åŒä¼˜å…ˆçº§çš„æœåŠ¡åˆ†é…ä¸åŒçš„APIé…é¢
4. **å¤šäº¤æ˜“æ‰€è´Ÿè½½å‡è¡¡**ï¼šåˆ†æ•£APIè¯·æ±‚åˆ°å¤šä¸ªäº¤æ˜“æ‰€è´¦æˆ·

---

## ğŸ“Œ ç›¸å…³æ–‡æ¡£

- [å¸å®‰æ¡ä»¶å•ä¿®å¤æ€»ç»“](./å¸å®‰æ¡ä»¶å•ä¿®å¤æ€»ç»“-2025-12-10.md)
- [APIè¯·æ±‚ä¼˜åŒ–-å¿«é€Ÿå‚è€ƒ](./APIè¯·æ±‚ä¼˜åŒ–-å¿«é€Ÿå‚è€ƒ.md)
- [ç³»ç»Ÿäº¤æ˜“æµç¨‹ä¸çŠ¶æ€ç®¡ç†åˆ†æ](./ç³»ç»Ÿäº¤æ˜“æµç¨‹ä¸çŠ¶æ€ç®¡ç†åˆ†æ.md)

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¶é—´**: 2025-01-XX  
**æœ€åæ›´æ–°**: 2025-01-XX  
**ç»´æŠ¤è€…**: AI Auto-Trading Team
